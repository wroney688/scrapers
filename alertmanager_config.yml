global:
templates:
- '/etc/alertmanager/*.tmpl'
route:
  receiver: page
  group_by: ['alertname', 'priority']
  group_wait: 10s
  repeat_interval: 1m
  
  routes:
    - receiver: triage
      match:
        severity: triage
      group_wait: 10s
      repeat_interval: 1m
      continue: true
      
    - receiver: smoketest
      match:
        severity: smoketest
      group_wait: 10s
      repeat_interval: 1m
      continue: true

receivers:
- name: page
  webhook_configs:
  - url: http://tsm-robotics-web:5000/alert/page
  
- name: triage
  webhook_configs:
  - url: http://tsm-robotics-web:5000/alert/triage
  - url: http://192.168.10.142:5000/alert/robotics
  
- name: smoketest
  webhook_configs:
  - url: http://tsm-robotics-web:5000/notify/smoketest
  - url: http://192.168.10.142:5000/notify/robotics
